manifest {
  name = 'autodiff-experiments'
  author = 'Mathieu Fourment'
  homePage = 'https://github.com/4ment/autodiff-experiments'
  description = 'Benchmarking of automatic and analytical differentiation'
  mainScript = 'main.nf'
}

profiles {

    standard {

        process {
            executor = 'local'
            container = 'quay.io/matsengrp/autodiff-experiments:phylo_patch'
            cpus = 4
            memory = 20.GB
        }

        singularity {
            enabled = true
            autoMounts = true
            cacheDir = '/fh/scratch/delete30/matsen_e/mathieu/temp/containers/'
            runOptions = '--contain -W /tmp/'
        }
    }
    

    rhino {
        process {
            executor = 'slurm'
            //scratch = '/fh/scratch/delete30/matsen_e/mathieu/temp/nf-scratch/'
            queue = 'campus-new'
            cpus = 4
            memory = 32.GB
            container = 'quay.io/matsengrp/autodiff-experiments:phylo_patch'
            time = '200h'

            withLabel: normal {
                time = '5h'
            }
            withLabel: fast {
                time = '60m'
            }
            withLabel: ultrafast{
                time = '5m'
            }
        }

        singularity {
            enabled = true
            autoMounts = true
            cacheDir = '/fh/scratch/delete30/matsen_e/mathieu/temp/containers/'
            runOptions = '--contain -W /tmp/'
        }
    }
}
